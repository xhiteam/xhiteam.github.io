[{"word":["前言","：","当","数据","发生","变化","时","，","ue","是","如","何","去","更新","节点","的","？","渲染","真实的","DOM","开销","是","很大的","，","如果","当","修改","了","某个","数据","后","直接","渲染","到","真实","om","上回","引起","整个","om","数","的","重","绘","和","重","排","，","下","例","展示","了","一个","“","昂贵的","”","DOM","：","控制台","输入","：","1234","ar","o","&","#","x","3","D",";","ocument",".","createElement","(","&","#","39",";","&","#","39",";",")",";","for","(","ar","k","n","o",")","&","#","123",";","console",".","log","(","k",")","&","#","125",";","结果","：","可见","，","真正","的","DOM","元素","是","非常","庞大的","，","因为","浏览器","把","DOM","设计","地","非常","复杂","，","所以","当","我们","频繁地","去","更新","DOM","时","，","如果","每次","都","重新","生成","新的","元素","，","对","性能","是","巨大的","浪费","。","那","我们","更新","DOM","时","，","能不能","只","更新","修改","的","地方","呢","？","此时","ff","算法","便","能够","帮助","我们","ff","会","先","根据","真实","DOM","生成","一","棵","rtual","DOM","（","虚拟","om","）","，","当","rtual","DOM","某个","节点","的","数据","改变","后","会","生成","一个","新的","Vnoe","，","然后","Vnoe","和","olVnoe","作对","比","，","发","现有","不一样","的","地方","就","直接","修改","在","真实的","DOM","上","，","然后","使","olVnoe","的","值","为","Vnoe","。","#","1",".","ff","算法","概念","#","#","#","1.1","简介","ff","算法","是","一种","通过","同","层","的","树","节点","进行","比较","的","高效","算法","，","避免","了","对","树","进行","逐","层","搜索","遍历","，","所以","时间","复杂度","只","有","O","(","n",")","。","ff","算法","的","在","很多","场景","下","都","有","应用","，","例如","在","ue","虚拟","om","渲染","成","真实","om","的","新旧","VNoe","节点","比较","更新","时","，","就","用到","了","该","算法","。","#","#","#","1.2","特点","只","会","在","同","层级","进行","，","不会","跨","层级","比较","eg",".","12345678","&","#","x","2","F",";","&","#","x","2","F",";","ol",":","p","123","&","#","x","2","F",";","p","&","#","x","2","F",";","&","#","x","2","F",";","&","#","x","2","F",";","new",":","span","456","&","#","x","2","F",";","span","&","#","x","2","F",";","上面","的","代码","会","分别","比较","同一层","的","两个","以及","第二层","的","p","和","span","，","但是","不会","拿","和","span","作","比较","。","#","2",".","Vrtual","DOM","Vrtual","DOM","也就是","虚拟","节点","，","其实","就是","一","棵","以","JaaScrpt","对象","(","VNoe","节点",")","作为","基础","的","树","，","用","对象","属性","来","描述","节点","，","实际上","它","只","是","一层","对","真实","DOM","的","抽象","。","最终","可以","通过","一系列","操作","使这棵树","映射","到","真实","环境","上","简单来说","，","可以","把","Vrtual","DOM","理解","为","一个","简单的","JS","对象","，","并且","最少","包含","标签","名","(","tag",")","、","属性","(","attrs",")","和","子","元素","对象","(","chlren",")","三个","属性","。","不同的","框架","对","这","三个","属性","的","命名","会","有点","差别","。","eg",".","现在","有","这样","一个","Vrtual","DOM","：","123456789101112131415","&","#","123",";","tag",":","&","#","39",";","&","#","39",";","ata",":","&","#","123",";","class",":","&","#","39",";","outer","&","#","39",";","&","#","125",";",",","chlren",":","[","&","#","123",";","tag",":","&","#","39",";","&","#","39",";",",","ata",":","&","#","123",";","class",":","&","#","39",";","nner","&","#","39",";","&","#","125",";","text",":","&","#","39",";","Vrtual","DOM","&","#","39",";","&","#","125",";","]","&","#","125",";","渲染","之后","的","真实","DOM","为","：","123","class","&","#","x","3","D",";","&","quot",";","outer","&","quot",";","span","class","&","#","x","3","D",";","&","quot",";","nner","&","quot",";","Vrtual","DOM","&","#","x","2","F",";","span","&","#","x","2","F",";","#","3",".","ff","算法","思想","重要的","几个","函数","#","#","#","sameVnoe","比较","了","两个","节点","的","key","，","tag","（","标签","）",",","sComment","(","是否","为","注释","节点",")","ata","（","注意","这里","的","ata","指","的","是","VNoeData","）","，","nput","的话","直接","比较","type","。","（","key","相同","，","节点","的","类型","相同","–","说明","这个","节点","只是","变化","了","内容","，","不需要","创建","新的","节点","，","可","以","复用","）","简单的","举","个","的","case","，","比如","之前","是","一个","标签","，","由于","逻辑","的","变动","，","变为","p","标签","了","，","则","sameVnoe","会","返回","false","(","a",".","tag","=","=","=","b",".","tag","返回","false",")","。","所以","sameVnoe","表明","的","是","，","满足","以上","条件","就是","同一个","元素","，","才","可","进行","patchVnoe","。","反过来","理解","就是","，","只要","以上","任意","一个","发生","改变","，","则","无需","进行","pathchVnoe","，","直接","根据","noe","进行","createElm","即可","。","注意","，","sameVnoe","返回","true","，","不能","说明","是","同一个","noe","，","这里","的","相同","是","指","当前","的","以上","指标","一致","，","他们","的","chlren","可能发生","了","变化","，","仍","需","进行","patchVnoe","进行","更新","。","#","#","#","patchVnoe","该","方法","用来","真正","对","新旧","节点","进行","对比","，","得到","最小","应该","变化","的","DOM","，","然后","直接","更新","DOM","。","下面","是","需要","patch","的","几种","情况","，","这","几种","情况","都会","有","对应","的","真实","DOM","测试","用例","来","验证","。","整体","策略","：","深度","优先","，","同","层","比较","12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455","functon","patchVnoe","(","olVnoe",",","noe",",","nserteVnoeQueue",",","ownerArray",",","nex",",","remoeOnly",")","&","#","123",";","&","#","x","2","F",";","&","#","x","2","F",";",".",".",".","&","#","x","2","F",";","&","#","x","2","F",";","新旧","节点","完全一致","，","直接","返回","f","(","olVnoe","&","#","x","3","D",";","&","#","x","3","D",";","&","#","x","3","D",";","noe",")","&","#","123",";","return","&","#","125",";","&","#","x","2","F",";","&","#","x","2","F",";","将","旧","节点","上","的","DOM","，","添加","到","新","节点","上","。","之后","新旧","节点","若","有","不一致","，","直接","修改","elm","即可","const","elm","&","#","x","3","D",";","noe",".","elm","&","#","x","3","D",";","olVnoe",".","elm","const","olCh","&","#","x","3","D",";","olVnoe",".","chlren","const","ch","&","#","x","3","D",";","noe",".","chlren","&","#","x","2","F",";","&","#","x","2","F",";","新","节点","不是","文本","节点","f","(","sUnef","(","noe",".","text",")",")","&","#","123",";","f","(","sDef","(","olCh",")","&","amp",";","&","amp",";","sDef","(","ch",")",")","&","#","123",";","&","#","x","2","F",";","&","#","x","2","F",";","新旧","节点","都","存","在","子","元素","，","更新","子","节点","（","递归","操作","）","f","(","olCh","!","&","#","x","3","D",";","&","#","x","3","D",";","ch",")","upateChlren","(","elm",",","olCh",",","ch",",","nserteVnoeQueue",",","remoeOnly",")","&","#","125",";","else","f","(","sDef","(","ch",")",")","&","#","123",";","&","#","x","2","F",";","&","#","x","2","F",";","只有","新","节点","存在","子","元素","，","先","清","空","节点","上","的","文本","，","然后","将","子","元素","创建","为","真实","DOM","插入","&","#","x","2","F",";","*","ol",":","&","#","x","2","F",";","new",":","p","&","#","x","2","F",";","p","&","#","x","2","F",";","*","&","#","x","2","F",";","f","(","sDef","(","olVnoe",".","text",")",")","noeOps",".","setTextContent","(","elm",",","&","#","39",";","&","#","39",";",")","aVnoes","(","elm",",","null",",","ch",",","0",",","ch",".","length","-","1",",","nserteVnoeQueue",")","&","#","125",";","else","f","(","sDef","(","olCh",")",")","&","#","123",";","&","#","x","2","F",";","&","#","x","2","F",";","只","有旧","节点","有","子","元素","，","直接","删除","&","#","x","2","F",";","*","ol",":","p","&","#","x","2","F",";","p","&","#","x","2","F",";","new",":","&","#","x","2","F",";","*","&","#","x","2","F",";","remoeVnoes","(","olCh",",","0",",","olCh",".","length","-","1",")","&","#","125",";","else","f","(","sDef","(","olVnoe",".","text",")",")","&","#","123",";","&","#","x","2","F",";","&","#","x","2","F",";","只","有旧","节点","上","有","文本","时","：","新","节点","上","没","有","，","清","空","旧","节点","上","的","文本","noeOps",".","setTextContent","(","elm",",","&","#","39",";","&","#","39",";",")","&","#","125",";","&","#","125",";","else","f","(","olVnoe",".","text","!","&","#","x","3","D",";","&","#","x","3","D",";","noe",".","text",")","&","#","123",";","&","#","x","2","F",";","&","#","x","2","F",";","新","节点","是","文本","节点","，","判断","与","旧","节点","上","的","文本","节点","是否","一致","。","不一致","更新","节点","上","的","文本","。","noeOps",".","setTextContent","(","elm",",","noe",".","text",")","&","#","125",";","&","#","x","2","F",";","&","#","x","2","F",";",".",".",".","&","#","125",";","#","#","#","upateChlren","比较","新旧","子","节点","1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192","functon","upateChlren","(","parentElm",",","olCh",",","newCh",",","nserteVnoeQueue",",","remoeOnly",")","&","#","123",";","&","#","x","2","F",";","&","#","x","2","F",";","四个","指针","let","olStartIx","&","#","x","3","D",";","0","&","#","x","2","F",";","&","#","x","2","F",";","旧","节点","第","一个","元素","的","下标","let","newStartIx","&","#","x","3","D",";","0","&","#","x","2","F",";","&","#","x","2","F",";","新","节点","第","一个","元素","的","下标","let","olEnIx","&","#","x","3","D",";","olCh",".","length","-","1","&","#","x","2","F",";","&","#","x","2","F",";","旧","节点","最后","一个","元素","的","下标","let","olStartVnoe","&","#","x","3","D",";","olCh","[","0","]","&","#","x","2","F",";","&","#","x","2","F",";","旧","节点","中","第","一个","节点","&","#","x","2","F",";","&","#","x","2","F",";","四个","节点","let","olEnVnoe","&","#","x","3","D",";","olCh","[","olEnIx","]","&","#","x","2","F",";","&","#","x","2","F",";","旧","节点","最后","一个","节点","let","newEnIx","&","#","x","3","D",";","newCh",".","length","-","1","&","#","x","2","F",";","&","#","x","2","F",";","新","节点","最后","一个","元素","的","下标","let","newStartVnoe","&","#","x","3","D",";","newCh","[","0","]","&","#","x","2","F",";","&","#","x","2","F",";","新","节点","第","一个","节点","let","newEnVnoe","&","#","x","3","D",";","newCh","[","newEnIx","]","&","#","x","2","F",";","&","#","x","2","F",";","新","节点","最后","一个","节点","let","olKeyToIx",",","xInOl",",","noeToMoe",",","refElm","&","#","x","2","F",";","&","#","x","2","F",";","这里","是","ff","算法","的","核心","流程","，","分","情况","进行","了","新","老","节点","的","比较","并","移动","对应","的","VNoe","节点","，","whle","循环","的","退出","条件","是","直到","老","节点","或者","新","节点","的","开始","位置","大于","结束","位置","。","whle","(","olStartIx","&","#","x","3","D",";","olEnIx","&","amp",";","&","amp",";","newStartIx","&","#","x","3","D",";","newEnIx",")","&","#","123",";","&","#","x","2","F",";","&","#","x","2","F",";","如果","旧","节点","中","开始","的","节点","是","unefne","，","开始","节点","下标","就","后","移","一位","f","(","sUnef","(","olStartVnoe",")",")","&","#","123",";","olStartVnoe","&","#","x","3","D",";","olCh","[","+","+","olStartIx","]","&","#","x","2","F",";","&","#","x","2","F",";","Vnoe","has","been","moe","left","&","#","125",";","else","f","(","sUnef","(","olEnVnoe",")",")","&","#","123",";","&","#","x","2","F",";","&","#","x","2","F",";","如果","旧","节点","结束","节点","是","unefne","，","结束","节点","下标","就","迁移","一位","olEnVnoe","&","#","x","3","D",";","olCh","[","-","-","olEnIx","]","&","#","125",";","else","f","(","sameVnoe","(","olStartVnoe",",","newStartVnoe",")",")","&","#","123",";","&","#","x","2","F",";","&","#","x","2","F",";","旧","开始","节点","与","新","开始","节点","相同","，","需要","比较","他们","的","子","节点","patchVnoe","(","olStartVnoe",",","newStartVnoe",",","nserteVnoeQueue",",","newCh",",","newStartIx",")","&","#","x","2","F",";","&","#","x","2","F",";","之后","旧","开始","节点","、","新","开始","节点","，","下标","均","后","移","一位","olStartVnoe","&","#","x","3","D",";","olCh","[","+","+","olStartIx","]","newStartVnoe","&","#","x","3","D",";","newCh","[","+","+","newStartIx","]","&","#","125",";","else","f","(","sameVnoe","(","olEnVnoe",",","newEnVnoe",")",")","&","#","123",";","&","#","x","2","F",";","&","#","x","2","F",";","旧","结束","节点","与","新","结束","节点","相同","，","需要","比较","他们","的","子","节点","patchVnoe","(","olEnVnoe",",","newEnVnoe",",","nserteVnoeQueue",",","newCh",",","newEnIx",")","&","#","x","2","F",";","&","#","x","2","F",";","之后","旧","结束","节点","、","新","结束","节点","，","下标","均","前","移","一位","olEnVnoe","&","#","x","3","D",";","olCh","[","-","-","olEnIx","]","newEnVnoe","&","#","x","3","D",";","newCh","[","-","-","newEnIx","]","&","#","125",";","else","f","(","sameVnoe","(","olStartVnoe",",","newEnVnoe",")",")","&","#","123",";","&","#","x","2","F",";","&","#","x","2","F",";","Vnoe","moe","rght","&","#","x","2","F",";","&","#","x","2","F",";","旧","开始","节点","与","新","结束","节点","相同","，","这","说明","这次","数据","更新","后","olStartVnoe","已经","跑到","了","olEnVnoe","后面","去","了","。","这时候","在","patchVnoe","后","，","还","需要","将","当前","真实","om","节点","移动","到","olEnVnoe","的","后面","，","同时","老","VNoe","节点","开始","索引","加","1","，","新","VNoe","节点","的","结束","索引","减","1","。","patchVnoe","(","olStartVnoe",",","newEnVnoe",",","nserteVnoeQueue",",","newCh",",","newEnIx",")","&","#","x","2","F",";","&","#","x","2","F",";","旧","开始","节点","插入","到","旧","结束","节点","后面","canMoe","&","amp",";","&","amp",";","noeOps",".","nsertBefore","(","parentElm",",","olStartVnoe",".","elm",",","noeOps",".","nextSblng","(","olEnVnoe",".","elm",")",")","&","#","x","2","F",";","&","#","x","2","F",";","旧","节点","开始","下标","后","移","一位","，","新","节点","结束","下标","前","移","一位","olStartVnoe","&","#","x","3","D",";","olCh","[","+","+","olStartIx","]","newEnVnoe","&","#","x","3","D",";","newCh","[","-","-","newEnIx","]","&","#","125",";","else","f","(","sameVnoe","(","olEnVnoe",",","newStartVnoe",")",")","&","#","123",";","&","#","x","2","F",";","&","#","x","2","F",";","Vnoe","moe","left","&","#","x","2","F",";","&","#","x","2","F",";","旧","结束","节点","与","新","开始","节点","相同","时","，","这","说明","这次","数据","更新","后","olEnVnoe","跑到","了","olStartVnoe","的","前面","去","了","。","这时候","在","patchVnoe","后","，","还","需要","将","当前","真实","om","节点","移动","到","olStartVnoe","的","前面","，","同时","老","VNoe","节点","结束","索引","减","1","，","新","VNoe","节点","的","开始","索引","加","1","patchVnoe","(","olEnVnoe",",","newStartVnoe",",","nserteVnoeQueue",",","newCh",",","newStartIx",")","&","#","x","2","F",";","&","#","x","2","F",";","将","旧","结束","节点","插入","到","旧","开始","节点","之前","canMoe","&","amp",";","&","amp",";","noeOps",".","nsertBefore","(","parentElm",",","olEnVnoe",".","elm",",","olStartVnoe",".","elm",")","&","#","x","2","F",";","&","#","x","2","F",";","旧","结束","节点","前","移","一位","，","新","开始","节点","后","移","一位","olEnVnoe","&","#","x","3","D",";","olCh","[","-","-","olEnIx","]","newStartVnoe","&","#","x","3","D",";","newCh","[","+","+","newStartIx","]","&","#","125",";","else","&","#","123",";","&","#","x","2","F",";","&","#","x","2","F",";","否则","，","将","每个","旧","节点","的","key","值","组成","一个","对应","的","map","表","，","然后","判断","新","节点","的","key","是否","在","map","表","中","f","(","sUnef","(","olKeyToIx",")",")","olKeyToIx","&","#","x","3","D",";","createKeyToOlIx","(","olCh",",","olStartIx",",","olEnIx",")","&","#","x","2","F",";","&","#","x","2","F",";","xInOl","是","在","旧","节点","列表","中","，","与","新","节点","相同","的","旧","节点","位置","xInOl","&","#","x","3","D",";","sDef","(","newStartVnoe",".","key",")","?","olKeyToIx","[","newStartVnoe",".","key","]","&","#","x","2","F",";","&","#","x","2","F",";","key","值","比较",":","fnIxInOl","(","newStartVnoe",",","olCh",",","olStartIx",",","olEnIx",")","&","#","x","2","F",";","&","#","x","2","F",";","sameVnoe","进行","比较","f","(","sUnef","(","xInOl",")",")","&","#","123",";","&","#","x","2","F",";","&","#","x","2","F",";","New","element","&","#","x","2","F",";","&","#","x","2","F",";","如果","key","不在","map","表","中","，","则","创建","新","节点","createElm","(","newStartVnoe",",","nserteVnoeQueue",",","parentElm",",","olStartVnoe",".","elm",",","false",",","newCh",",","newStartIx",")","&","#","125",";","else","&","#","123",";","&","#","x","2","F",";","&","#","x","2","F",";","若","在","，","则","判断","该","key","值","对应","的","旧","节点","与","新","节点","是否","是","相同","的","节点","noeToMoe","&","#","x","3","D",";","olCh","[","xInOl","]","f","(","sameVnoe","(","noeToMoe",",","newStartVnoe",")",")","&","#","123",";","&","#","x","2","F",";","&","#","x","2","F",";","若","该","key","值","对应","的","旧","节点","与","新","节点","是","相同","的","节点","，","则","比较","他们","的","子","节点","&","#","x","2","F",";","&","#","x","2","F",";","同时","将","该","key","值","对应","的","节点","插入","到","旧","开始","节点","之前","patchVnoe","(","noeToMoe",",","newStartVnoe",",","nserteVnoeQueue",",","newCh",",","newStartIx",")","olCh","[","xInOl","]","&","#","x","3","D",";","unefne","canMoe","&","amp",";","&","amp",";","noeOps",".","nsertBefore","(","parentElm",",","noeToMoe",".","elm",",","olStartVnoe",".","elm",")","&","#","125",";","else","&","#","123",";","&","#","x","2","F",";","&","#","x","2","F",";","若","不","相同","，","则","创建","新","节点","&","#","x","2","F",";","&","#","x","2","F",";","same","key","but","fferent","element",".","treat","as","new","element","createElm","(","newStartVnoe",",","nserteVnoeQueue",",","parentElm",",","olStartVnoe",".","elm",",","false",",","newCh",",","newStartIx",")","&","#","125",";","&","#","125",";","&","#","x","2","F",";","&","#","x","2","F",";","key","值","判断","之后","，","新","开始","节点","后","移","一位","newStartVnoe","&","#","x","3","D",";","newCh","[","+","+","newStartIx","]","&","#","125",";","&","#","125",";","f","(","olStartIx","olEnIx",")","&","#","123",";","&","#","x","2","F",";","&","#","x","2","F",";","如果","旧","节点","列表","先","处理","完","，","则","将","剩余","的","新","节点","创建","为","真实","DOM","插入","refElm","&","#","x","3","D",";","sUnef","(","newCh","[","newEnIx","+","1","]",")","?","null",":","newCh","[","newEnIx","+","1","]",".","elm","aVnoes","(","parentElm",",","refElm",",","newCh",",","newStartIx",",","newEnIx",",","nserteVnoeQueue",")","&","#","125",";","else","f","(","newStartIx","newEnIx",")","&","#","123",";","&","#","x","2","F",";","&","#","x","2","F",";","如果","新","节点","列表","先","处理","完","，","则","删除","剩余","的","旧","节点","remoeVnoes","(","olCh",",","olStartIx",",","olEnIx",")","&","#","125",";","&","#","125",";","分为","5种","情况","：","1","、","旧","开始","节点","=","=","新","开始","节点","若","旧","开始","节点","与","新","开始","节点","相等","时","，","说明","旧","开始","节点","的","位置","是","对","的","，","不需要","更新","该","节点","。","之后","是","将","旧","开始","节点","和","新","开始","节点","的","下标","后","移","一位","。","2","、","旧","结束","节点","=","=","新","结束","节点","若","旧","结束","节点","与","新","结束","节点","相等","，","说明","旧","节点","的","位置","是","对","的","，","不需要","更新","该","节点","。","之后","是","将","旧","结束","节点","和","新","结束","节点","的","下标","前","移","一位","。","3","、","旧","开始","节点","=","=","新","结束","节点","若","旧","开始","节点","与","新","结束","节点","相等","，","说明","旧","开始","节点","的","位置","不对","了","，","需要","移动","到","olEnVnoe","后面","。","然后","将","旧","开始","节点","的","下标","后","移","一位","，","新","结束","节点","的","下标","前","移","一位","4","、","旧","结束","节点","=","=","新","开始","节点","若","旧","结束","节点","与","新","开始","节点","相等","，","说明","旧","结束","节点","需要","移动","到","olStartVnoe","前面","。","然后","将","旧","结束","节点","前","移","一位","，","新","开始","节点","位置","后","移","一位","。","5","、","key","值","查找","当","前面","四种","比较","都","不行","的","时候","，","则","会","去","通过","key","值","进行","查找","。","查找","时候","是","当前","的","新","节点","，","去","遍历","旧","节点","数组","，","找到","相同","的","旧","节点","，","然后","将","其","移到","olStartVnoe","前面","。","大致","流程","是","：","6","、","处理","剩余","节点","接着","就是","处理","余下","的","新旧","节点","。","有","两种","情况","：","(","1",")","新","节","处理","完了","，","旧","节点","还有","剩余","将","剩余","的","旧","节点","，","逐个","删除","即可","。","12345678910111213141516","&","#","x","2","F",";","&","#","x","2","F",";","删除","剩余","的","旧","节点","remoeVnoes","(","olCh",",","olStartIx",",","olEnIx",")","functon","remoeVnoes","(","noes",",","startIx",",","enIx",")","&","#","123",";","for","(",";","startIx","&","#","x","3","D",";","enIx",";","+","+","startIx",")","&","#","123",";","const","ch","&","#","x","3","D",";","noes","[","startIx","]","f","(","sDef","(","ch",")",")","&","#","123",";","f","(","sDef","(","ch",".","tag",")",")","&","#","123",";","remoeAnInokeRemoeHook","(","ch",")","nokeDestroyHook","(","ch",")","&","#","125",";","else","&","#","123",";","&","#","x","2","F",";","&","#","x","2","F",";","Text","noe","remoeNoe","(","ch",".","elm",")","&","#","125",";","&","#","125",";","&","#","125",";","&","#","125",";","2",")","新","节点","有","剩余","，","旧","节点","处理","完了","逐个","创建","剩余","的","新","节点","。","有","个","问题是","，","将","剩余","的","新","节点","创建","好","后","，","插入","到","哪里","呢","？","12345678","&","#","x","2","F",";","&","#","x","2","F",";","将","剩余","的","新","节点","创建","为","真实的","DOM","插入","refElm","&","#","x","3","D",";","sUnef","(","newCh","[","newEnIx","+","1","]",")","?","null",":","newCh","[","newEnIx","+","1","]",".","elm","aVnoes","(","parentElm",",","refElm",",","newCh",",","newStartIx",",","newEnIx",",","nserteVnoeQueue",")","functon","aVnoes","(","parentElm",",","refElm",",","noes",",","startIx",",","enIx",",","nserteVnoeQueue",")","&","#","123",";","for","(",";","startIx","&","#","x","3","D",";","enIx",";","+","+","startIx",")","&","#","123",";","createElm","(","noes","[","startIx","]",",","nserteVnoeQueue",",","parentElm",",","refElm",",","false",",","noes",",","startIx",")","&","#","125",";","&","#","125",";","可以","看到","，","refElm","是","获取","新","节点","最后","一个","节点","。","如果","refElm","存","在","的话","，","说明","最后","一个","节点","之前","被","处理","过","，","那么","剩余","的","新","节点","插入","到","refElm","前面","即可","。","如果","refElm","不存在","，","则","将","剩余","的","新","节点","插入","到","父","节点","孩子","的","末尾","。","4",".","总结","ff","算法","流程图","："],"url":"https://xhiteam.github.io/2020/10/16/Vue%E8%99%9A%E6%8B%9FDOMdiff%E7%AE%97%E6%B3%95/","title":"Vue虚拟DOMdiff算法","content":"前言：当数据发生变化时，vue是如何去更新节点的？\n渲染真实的DOM开销是很大的，如果当修改了某个数据后直接渲染到真实dom上回引起整个dom数的重绘和重排，下例展示了一个“昂贵的”DOM：控制台输入：\n1234var odiv &#...","author":"xhiteam","categorie":{"url":"https://xhiteam.github.io/categories/%E5%89%8D%E7%AB%AF%E7%BB%84%E5%88%86%E4%BA%AB/","name":"前端组分享"},"date":"2020-10-16 22:29:16"},{"word":["Belee","n","Technology","Wechat",":","LamboChen","2306","Emal",":","&","#","108",";","&","#","x","61",";","&","#","109",";","&","#","98",";","&","#","111",";","&","#","46",";","&","#","99",";","&","#","104",";","&","#","x","65",";","&","#","x","6","e",";","&","#","46",";","&","#","50",";","&","#","x","33",";","&","#","48",";","&","#","54",";","&","#","x","40",";","&","#","x","67",";","&","#","x","6",";","&","#","x","61",";","&","#","x","69",";","&","#","108",";","&","#","x","2","e",";","&","#","99",";","&","#","x","6","f",";","&","#","x","6",";","Gthub",":","https",":","gthub",".","comxhteam","Wechat","Offcal","Account",":","xhteam"],"url":"https://xhiteam.github.io/2020/09/14/%E5%85%B3%E4%BA%8E%E5%9B%A2%E9%98%9F/","title":"关于xhiteam团队","content":"Believe in Technology\nWechat: LamboChen2306\nEmail: &#108;&#x61;&#109;&#98;&#111;&#46;&#99;&#104;&#x65;&#x6e;&#46;&#50...","author":"xhiteam","categorie":{"url":"https://xhiteam.github.io/categories/%E5%9B%A2%E9%98%9F/","name":"团队"},"date":"2020-09-14 20:44:51"}]